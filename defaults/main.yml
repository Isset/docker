---
isset_docker_state: present
isset_docker_key_url: https://download.docker.com/linux/ubuntu/gpg
isset_docker_key_id: "0EBFCD88"
isset_docker_package: docker-ce
isset_docker_repo_filename: docker
isset_docker_repo: "deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable"
isset_docker_daemon: '{}'
isset_docker_ufw: |
  *filter
  :ufw-user-forward - [0:0]
  :DOCKER-USER - [0:0]
  -A DOCKER-USER -j RETURN -s 10.0.0.0/8
  -A DOCKER-USER -j RETURN -s 172.16.0.0/12
  -A DOCKER-USER -j RETURN -s 192.168.0.0/16

  -A DOCKER-USER -p udp -m udp --sport 53 --dport 1024:65535 -j RETURN

  -A DOCKER-USER -j ufw-user-forward

  -A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 192.168.0.0/16
  -A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 10.0.0.0/8
  -A DOCKER-USER -j DROP -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -d 172.16.0.0/12
  -A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 192.168.0.0/16
  -A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 10.0.0.0/8
  -A DOCKER-USER -j DROP -p udp -m udp --dport 0:32767 -d 172.16.0.0/12

  -A DOCKER-USER -j RETURN
  COMMIT
